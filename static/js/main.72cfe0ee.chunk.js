(this.webpackJsonpxivtrans=this.webpackJsonpxivtrans||[]).push([[0],{129:function(e,a,t){e.exports=t(212)},134:function(e,a,t){},136:function(e,a,t){},212:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(10),o=t.n(c),i=(t(134),t(88)),s=t(55),l=t.n(s),u=t(57),h=t(85),d=(t(136),t(137),t(216)),m=t(218),f=t(217),v=t(213),g=t(219),p=t(220),b=t(215);function E(e){return r.a.createElement(b.a,{size:"large",onChange:function(a){e.onChange(a)},defaultValue:e.value},e.languages.map((function(e){return r.a.createElement(b.a.Option,{key:e,value:e},e.toUpperCase())})))}function w(e){for(var a="https://garlandtools.org/db/#",t=0,n=["item","quest","achievement","action","status","fate","leve",["ENpcResident","npc"]];t<n.length;t++){var r=n[t];if(Array.isArray(r)){if(0===e.Url.toLowerCase().indexOf("/".concat(r[0])))return"".concat(a).concat(r[1],"/").concat(e.ID)}else if(0===e.Url.toLowerCase().indexOf("/".concat(r)))return"".concat(a).concat(r,"/").concat(e.ID)}return"https://garlandtools.org/db/#search/"+encodeURI(e.Name)}function O(e){return r.a.createElement("div",{className:"result"},r.a.createElement("div",{className:"left"},r.a.createElement("a",{href:w(e.item),target:"blank"},r.a.createElement("img",{src:"https://xivapi.com/".concat(e.item.Icon),alt:"",className:"icon"}))),r.a.createElement("div",{className:"content","data-id":e.item.ID,"data-url":e.item.Url},e.displayedLangs.map((function(a){return r.a.createElement("span",{key:a},a.toUpperCase()," ",e.item["Name_"+a]," ",r.a.createElement("br",null))}))))}var j=t(124),N=t(114),k=t(115),y=function(){function e(){var a=this;Object(N.a)(this,e),this.navigationHashCache=null,this.getSearchFromNavigation=function(e){var t,n="";e?n=window.location.hash:n=null!==(t=a.navigationHashCache)&&void 0!==t?t:window.location.hash;if(n&&n.includes("/search/")){var r=decodeURIComponent(n.substr("/search/".length+1)).match(Object(j.a)(/^\/?(fr|en|ja|de)*\/(.+)/,{language:1,search:2}));if(r){var c,o,i,s=null===(c=r.groups)||void 0===c?void 0:c.search.trim();if(s&&s.length>0)return{language:null!==(o=null===(i=r.groups)||void 0===i?void 0:i.language)&&void 0!==o?o:"en",search:s}}}return null},this.setSearchInNavigation=function(e,t){a.navigationHashCache="/search/".concat(e,"/").concat(encodeURIComponent(t)),window.location.hash=a.navigationHashCache}}return Object(k.a)(e,[{key:"subscribe",value:function(e){var a=this;window.addEventListener("hashchange",(function(){if(a.navigationHashCache!==window.location.hash){var t=a.getSearchFromNavigation(!0);t&&e(t.language,t.search)}}))}}]),e}(),C=["en","fr","ja","de"],x=new Map;function I(e,a){return S.apply(this,arguments)}function S(){return(S=Object(h.a)(l.a.mark((function e(a,t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(n=t+a,!x.has(n)){e.next=5;break}return e.abrupt("return",x.get(n));case 5:return e.next=7,fetch("https://xivapi.com/search?language="+t+"&string="+encodeURIComponent(a)+"&columns=ID,Icon,Url,Name,Name_"+C.join(",Name_"));case 7:if((r=e.sent).ok){e.next=10;break}return e.abrupt("return",!1);case 10:return e.next=12,r.json();case 12:return c=e.sent.Results,x.set(n,c),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=new y;var L=function(){var e,a,t,c=U.getSearchFromNavigation(),o=Object(n.useState)(null!==(e=null===c||void 0===c?void 0:c.search)&&void 0!==e?e:""),s=Object(u.a)(o,2),b=s[0],w=s[1],j=Object(n.useState)([]),N=Object(u.a)(j,2),k=N[0],y=N[1],x=Object(n.useState)(function(){var e,a=JSON.parse(null!==(e=localStorage.getItem("displayedLangs"))&&void 0!==e?e:'["en", "fr"]'),t=[];return a.forEach((function(e){C.includes(e)&&t.push(e)})),t}()),S=Object(u.a)(x,2),L=S[0],R=S[1],D=null!==(a=null!==(t=null===c||void 0===c?void 0:c.language)&&void 0!==t?t:localStorage.getItem("lang"))&&void 0!==a?a:"en";C.includes(D)||(D="en");var H=Object(n.useState)(D),F=Object(u.a)(H,2),J=F[0],A=F[1],_=function(e){A(e)};return U.subscribe((function(e,a){_(e),w(a)})),Object(n.useEffect)((function(){c&&(null===c||void 0===c?void 0:c.search)!==b&&w(c.search)}),[c,J,b]),Object(n.useEffect)((function(){Object(h.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(b,J);case 2:(a=e.sent)&&y(a),U.setSearchInNavigation(J,b);case 5:case"end":return e.stop()}}),e)})))()}),[J,b]),r.a.createElement(d.a,null,r.a.createElement(d.a.Content,null,r.a.createElement("div",{className:"App"},r.a.createElement(m.a,{offsetTop:0},r.a.createElement("div",{className:"search"},C.map((function(e){return r.a.createElement("label",{key:e},r.a.createElement(f.a,{checked:L.includes(e),onChange:function(a){var t,n=Object(i.a)(L);if(a.target.checked)L.includes(e)||(n=[].concat(Object(i.a)(n),[e]));else{var r=L.indexOf(e);r>=0&&n.splice(r,1)}t=n,localStorage.setItem("displayedLangs",JSON.stringify(t)),R(t)}},e.toUpperCase()))})),r.a.createElement(v.a.Group,{compact:!0},r.a.createElement(E,{languages:C,value:J,onChange:function(e){return _(e)}}),r.a.createElement(v.a.Search,{size:"large",onSearch:function(e){w(e)},autoFocus:!0,style:{width:"80vw"},defaultValue:b})))),r.a.createElement(g.a,{justify:"center"},r.a.createElement(p.a,{xs:24,sm:20,md:16,lg:10},r.a.createElement("div",{className:"results"},k.map((function(e){return r.a.createElement(O,{key:e.ID,displayedLangs:L,item:e})}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.72cfe0ee.chunk.js.map